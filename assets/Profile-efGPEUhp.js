import{_ as b,b as p,o as u,d as t,e as g,n as h,t as i,f as V,g as n,r as m,m as S,A,w as c,F as B,h as F,a as d,c as y,i as N,j as P}from"./index--sbLEj3t.js";import{T as U}from"./Title-MimqtsJ6.js";import{M as j,I as T}from"./Input-CRN9G-Z4.js";const G={name:"CardComponent",inheritAttrs:!1,props:{label:String,icon:String,color:String,linkLabel:String,click:Function},methods:{handleClick(e){this.click&&this.click(e)}}},L={class:"col-xl-3 col-md-6 mb-4"},M={class:"card-body"},D={class:"row no-gutters align-items-center"},E={class:"col mr-2"},I={class:"h5 mb-0 text-gray-800"},K={key:0,class:"text-end"},z={class:"col-auto fa-2x text-gray-300"};function O(e,s,r,k,o,l){const w=m("font-awesome-icon");return u(),p("div",L,[t("div",{class:h("card border-left-"+(r.color??"primary")+" shadow h-100 py-2")},[t("div",M,[t("div",D,[t("div",E,[t("div",{class:h("text-xs font-weight-bold text-"+(r.color??"primary")+" text-uppercase mb-1")},i(r.label),3),t("div",I,[V(e.$slots,"default")]),r.linkLabel?(u(),p("div",K,[t("a",{href:"javascript:",class:h("mb-0 text-"+(r.color??"primary")),onClick:s[0]||(s[0]=(..._)=>l.handleClick&&l.handleClick(..._))},i(r.linkLabel),3)])):g("",!0)]),t("div",z,[n(w,{icon:r.icon},null,8,["icon"])])])])],2)])}const q=b(G,[["render",O]]),H={name:"FormGroupComponent",inheritAttrs:!1},J={class:"row"};function Q(e,s,r,k,o,l){return u(),p("div",J,[V(e.$slots,"default")])}const R=b(H,[["render",Q]]),W={name:"ProfilePage",components:{TitlePage:U,Card:q,FormGroup:R,InputField:T,Modal:j,Alert:A},data(){return{show_change_password:!1,password:{current_password:"",new_password:"",new_password_confirmation:""},error:"",success:"",messages:{current_password:null,new_password:null,new_password_confirmation:null}}},computed:{...S(["user"])},watch:{show_change_password(){this.reset_messages(),this.reset()}},methods:{reset_messages(){this.error="",this.success="",this.messages={current_password:null,new_password:null,new_password_confirmation:null}},reset(){this.password={current_password:"",new_password:"",new_password_confirmation:""}},modal_change_password(){this.show_change_password=!0},button_change_password(e){e=="save"&&this.change_password()},change_password(){this.reset_messages();let e=this;F.changePassword(this.password,function(s,r){s?(e.success=r.message,e.reset()):(e.error=r.messages?"":r.error,e.messages=Object.assign(e.messages,r.messages))})},submit(){this.change_password()}}},X=t("p",{class:"mb-3"}," Caso algum dado esteja incorreto, entre em contato com o administrador e solicite correção. ",-1),Y={class:"row"};function Z(e,s,r,k,o,l){const w=m("title-page"),_=m("card"),v=m("alert"),f=m("input-field"),C=m("form-group"),x=m("modal");return u(),p(B,null,[n(w,null,{default:c(()=>[d("Dados Pessoais")]),_:1}),X,t("div",Y,[n(_,{label:"Nome",icon:"user"},{default:c(()=>[d(i(e.user.name),1)]),_:1}),n(_,{label:"Usuário",icon:"address-card",color:"warning","link-label":"alterar senha",click:l.modal_change_password},{default:c(()=>[d(i(e.user.username),1)]),_:1},8,["click"]),n(_,{label:"E-mail",icon:"envelope",color:"info"},{default:c(()=>[d(i(e.user.email),1)]),_:1}),n(_,{label:"Telefone",icon:"phone",color:"success"},{default:c(()=>[d(i(e.user.phone),1)]),_:1})]),n(x,{modelValue:o.show_change_password,"onUpdate:modelValue":s[5]||(s[5]=a=>o.show_change_password=a),title:"Alterar Senha",buttons:{save:"Alterar Senha"},onButton:l.button_change_password},{default:c(()=>[o.error?(u(),y(v,{key:0,danger:""},{default:c(()=>[d(i(o.error),1)]),_:1})):g("",!0),o.success?(u(),y(v,{key:1,success:""},{default:c(()=>[d(i(o.success),1)]),_:1})):g("",!0),t("form",{onSubmit:s[3]||(s[3]=P((...a)=>l.submit&&l.submit(...a),["prevent"])),onKeydown:s[4]||(s[4]=N((...a)=>l.submit&&l.submit(...a),["enter"]))},[n(C,null,{default:c(()=>[n(f,{label:"Senha atual",type:"password",modelValue:o.password.current_password,"onUpdate:modelValue":s[0]||(s[0]=a=>o.password.current_password=a),error:o.messages.current_password,col:12,"col-lg":4},null,8,["modelValue","error"]),n(f,{label:"Nova senha",type:"password",modelValue:o.password.new_password,"onUpdate:modelValue":s[1]||(s[1]=a=>o.password.new_password=a),error:o.messages.new_password,col:12,"col-sm":6,"col-lg":4},null,8,["modelValue","error"]),n(f,{label:"Confirme a nova senha",type:"password",modelValue:o.password.new_password_confirmation,"onUpdate:modelValue":s[2]||(s[2]=a=>o.password.new_password_confirmation=a),error:o.messages.new_password_confirmation,col:12,"col-sm":6,"col-lg":4},null,8,["modelValue","error"])]),_:1})],32)]),_:1},8,["modelValue","onButton"])],64)}const oe=b(W,[["render",Z]]);export{oe as default};
